<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Jakarta EE Documentation</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">Jakarta EE Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jakarta-ee-docs" data-version="9.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Jakarta EE Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security-intro/security-intro.html">Introduction to Security in the Jakarta EE Platform</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security-webtier/security-webtier.html">Getting Started Securing Web Applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security-jakartaee/security-jakartaee.html">Getting Started Securing Enterprise Applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security-api/security-api.html">Using Jakarta Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="security-advanced.html">Jakarta EE Security: Advanced Topics</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jakarta EE Documentation</span>
    <span class="version">9.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../../current/index.html">Jakarta EE Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../current/index.html">10</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">9.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../current/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">9.1</button>
  <div class="version-menu">
    <a class="version" href="../../../current/security/security-advanced/security-advanced007.html">10</a>
    <a class="version is-current" href="security-advanced007.html">9.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="file:///Users/kito/Core/Projects/eclipse.refresh.jakarta.ee.tutorial/vcs/jakartaee-tutorial/src/main/docs/modules/security/pages/security-advanced/security-advanced007.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_configuring_security_using_deployment_descriptors"><a class="anchor" href="#_configuring_security_using_deployment_descriptors"></a>Configuring Security Using Deployment Descriptors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended way to configure security in the Jakarta EE 8 platform is with annotations.
If you wish to override the security settings at deployment time, you can use security elements in the <code>web.xml</code> deployment descriptor to do so.
This section describes how to use the deployment descriptor to specify basic authentication and to override default principal-to-role mapping.</p>
</div>
<div class="sect2">
<h3 id="_specifying_security_for_basic_authentication_in_the_deployment_descriptor"><a class="anchor" href="#_specifying_security_for_basic_authentication_in_the_deployment_descriptor"></a>Specifying Security for Basic Authentication in the Deployment Descriptor</h3>
<div class="paragraph">
<p>The elements of the deployment descriptor that add basic authentication to an example tell the server or browser to perform the following tasks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Send a standard login dialog box to collect user name and password data.</p>
</li>
<li>
<p>Verify that the user is authorized to access the application.</p>
</li>
<li>
<p>If authorized, display the servlet to the user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following sample code shows the security elements for a deployment descriptor that could be used in the example of basic authentication found in the <code><em>tut-install</em>/examples/security/hello2_basicauth/</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;security-constraint&gt;
        &lt;display-name&gt;SecurityConstraint&lt;/display-name&gt;
        &lt;web-resource-collection&gt;
             &lt;web-resource-name&gt;WRCollection&lt;/web-resource-name&gt;
            &lt;url-pattern&gt;/greeting&lt;/url-pattern&gt;
        &lt;/web-resource-collection&gt;
        &lt;auth-constraint&gt;
            &lt;role-name&gt;TutorialUser&lt;/role-name&gt;
        &lt;/auth-constraint&gt;
        &lt;user-data-constraint&gt;
             &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;
        &lt;/user-data-constraint&gt;
    &lt;/security-constraint&gt;
    &lt;login-config&gt;
        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
        &lt;realm-name&gt;file&lt;/realm-name&gt;
    &lt;/login-config&gt;
    &lt;security-role&gt;
        &lt;role-name&gt;TutorialUser&lt;/role-name&gt;
    &lt;/security-role&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This deployment descriptor specifies that the request URI <code>/greeting</code> can be accessed only by users who have entered their user names and passwords and have been authorized to access this URL because they have been verified to be in the role <code>TutorialUser</code>.
The user name and password data will be sent over a protected transport in order to keep it from being read in transit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_non_default_principal_to_role_mapping_in_the_deployment_descriptor"><a class="anchor" href="#_specifying_non_default_principal_to_role_mapping_in_the_deployment_descriptor"></a>Specifying Non-Default Principal-to-Role Mapping in the Deployment Descriptor</h3>
<div class="paragraph">
<p>Jakarta Security requires that group principal names be mapped to roles of the same name by default.
GlassFish adheres to this standard, by default, and provides group principal to role mapping.
Implementations of the standard can, however, provide mechanisms to configure a different default.</p>
</div>
<div class="paragraph">
<p>To map a role name permitted by the application or module to principals (users) and groups defined on the server, use the <code>security-role-mapping</code> element in the runtime deployment descriptor file (<code>glassfish-application.xml</code>, <code>glassfish-web.xml</code>, or <code>glassfish-ejb-jar.xml</code>).
The entry needs to declare a mapping between a security role used in the application and one or more groups or principals defined for the applicable realm of GlassFish Server.
An example for the <code>glassfish-web.xml</code> file is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;glassfish-web-app&gt;
    &lt;security-role-mapping&gt;
        &lt;role-name&gt;DIRECTOR&lt;/role-name&gt;
        &lt;principal-name&gt;schwartz&lt;/principal-name&gt;
    &lt;/security-role-mapping&gt;
    &lt;security-role-mapping&gt;
        &lt;role-name&gt;DEPT-ADMIN&lt;/role-name&gt;
        &lt;group-name&gt;dept-admins&lt;/group-name&gt;
    &lt;/security-role-mapping&gt;
&lt;/glassfish-web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The role name can be mapped to either a specific principal (user), a group, or both.
The principal or group names referenced must be valid principals or groups in the current default realm of GlassFish Server.
The <code>role-name</code> in this example must exactly match the <code>role-name</code> in the <code>security-role</code> element of the corresponding <code>web.xml</code> file or the role name defined in the <code>@DeclareRoles</code> and/or <code>@RolesAllowed</code> annotations.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
